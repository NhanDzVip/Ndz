getgenv().FindLegendarySwordDealer = function()
    local url = 'https://anbeo.onrender.com/api/status' -- API l·∫•y danh s√°ch server
    local chooses
    local foundServers = game:GetService('HttpService'):JSONDecode(game:HttpGet(url))

    for _, v in pairs(foundServers) do 
        if v.jobId ~= game.JobId then 
            chooses = v
        end
    end

    if chooses then
        game:GetService("TeleportService"):TeleportToPlaceInstance(7449423635, chooses.jobId, game.Players.LocalPlayer)
    end
end

function CheckLegendarySwordDealer()
    for _, npc in pairs(game.Workspace:GetChildren()) do
        if npc.Name == "Legendary Sword Dealer" then
            return npc
        end
    end
    return nil
end

function TeleportToNPC(npc)
    local player = game.Players.LocalPlayer
    local character = player.Character
    if character and npc then
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if hrp then
            hrp.CFrame = npc.CFrame + Vector3.new(0, 5, 0) -- Teleport l√™n tr√™n NPC m·ªôt ch√∫t
        end
    end
end

spawn(function()
    while task.wait(5) do -- Ki·ªÉm tra m·ªói 5 gi√¢y
        pcall(function()
            local npc = CheckLegendarySwordDealer()
            
            if npc then
                print("üü¢ ƒê√£ t√¨m th·∫•y Legendary Sword Dealer!")
                TeleportToNPC(npc) -- Teleport ƒë·∫øn NPC ngay khi t√¨m th·∫•y
            else
                print("üîÑ Kh√¥ng th·∫•y NPC, ti·∫øp t·ª•c hop server...")
                FindLegendarySwordDealer() -- N·∫øu kh√¥ng th·∫•y, hop server ti·∫øp
            end
        end)
    end
end)
